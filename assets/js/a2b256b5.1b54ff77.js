"use strict";(self.webpackChunkhab_guide=self.webpackChunkhab_guide||[]).push([[1329],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),y=a,h=d["".concat(s,".").concat(y)]||d[y]||c[y]||i;return n?r.createElement(h,o(o({ref:t},p),{},{components:n})):r.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},9403:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:5},o="Tear-down Live",l={unversionedId:"l2-k3s/teardown-live",id:"l2-k3s/teardown-live",title:"Tear-down Live",description:"Unlike previous teardown scripts, tearing down a live Kubernetes cluster and",source:"@site/docs/l2-k3s/teardown-live.md",sourceDirName:"l2-k3s",slug:"/l2-k3s/teardown-live",permalink:"/hab-guide/docs/l2-k3s/teardown-live",draft:!1,editUrl:"https://github.com/GildedPleb/hab-guide/edit/master/website/docs/l2-k3s/teardown-live.md",tags:[],version:"current",lastUpdatedBy:"GildedPleb",lastUpdatedAt:1672684880,formattedLastUpdatedAt:"Jan 2, 2023",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Stand-up Live",permalink:"/hab-guide/docs/l2-k3s/standup-live"},next:{title:"Layer 3 - Bitcoin",permalink:"/hab-guide/docs/category/layer-3---bitcoin"}},s={},u=[],p={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"tear-down-live"},"Tear-down Live"),(0,a.kt)("p",null,"Unlike previous teardown scripts, tearing down a live Kubernetes cluster and\nreturning it to a vanilla state can not happen host-by-host. You can still add\nand remove hosts from the cluster (though we'd be cautious about removing hosts\nwith Longhorn actively managing storage), but once you get into the live cluster\nlayer you begin to abstract away the differentiation between hosts, and start to\nreason with the cluster as one single entity."),(0,a.kt)("p",null,"As such, tearing down a live cluster is better thought of as simply uninstalling\nthe software we just installed."),(0,a.kt)("p",null,"In standing up a live k3s cluster we used an Ansible script to install 5\nessential apps. We did this because the installation order was important, and\nthe apps were fairly cut and dry. Because the installation order matters, so\ndoes the order by which we ",(0,a.kt)("em",{parentName:"p"},"uninstall")," these apps. As you browse\n",(0,a.kt)("inlineCode",{parentName:"p"},"K3s/teardown-live.yml")," keep this in mind."),(0,a.kt)("p",null,"Further, if you have additional apps, like Bitcoin running, on top of your live\ncluster you ",(0,a.kt)("strong",{parentName:"p"},"should not")," tear down the live cluster. First, you ",(0,a.kt)("em",{parentName:"p"},"must"),"\nuninstall those apps. Think about it like this: running teardown live without\nfirst backing up, and uninstalling, all your apps and data would be akin to\ninstalling a new operating system on your laptop without first backing up all\nyour apps and data, and expecting those apps to still work and the data to still\nbe there."),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"Do not run ",(0,a.kt)("inlineCode",{parentName:"p"},"K3s/teardown-Live.yml")," while any layer 3 apps are running.")),(0,a.kt)("p",null,"To teardown a live cluster (with no additionally installed apps running) run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"apb K3s/teardown-live.yml\n")))}d.isMDXComponent=!0}}]);