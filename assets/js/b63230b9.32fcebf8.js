"use strict";(self.webpackChunkhab_guide=self.webpackChunkhab_guide||[]).push([[8957],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1229:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:5},i="Practical Considerations",l={unversionedId:"Introduction/practical",id:"Introduction/practical",title:"Practical Considerations",description:"Design considerations can be very circumstance dependent. These practical",source:"@site/docs/Introduction/practical.md",sourceDirName:"Introduction",slug:"/Introduction/practical",permalink:"/hab-guide/docs/Introduction/practical",draft:!1,editUrl:"https://github.com/GildedPleb/hab-guide/edit/master/website/docs/Introduction/practical.md",tags:[],version:"current",lastUpdatedBy:"GildedPleb",lastUpdatedAt:1672640257,formattedLastUpdatedAt:"Jan 2, 2023",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Design Considerations",permalink:"/hab-guide/docs/Introduction/design"},next:{title:"Terminology",permalink:"/hab-guide/docs/Introduction/terminology"}},s={},u=[{value:"Hardware",id:"hardware",level:2},{value:"Multi-Compute",id:"multi-compute",level:3},{value:"Storage",id:"storage",level:3},{value:"Power",id:"power",level:3},{value:"Networking",id:"networking",level:3},{value:"Software",id:"software",level:2},{value:"Orchestration",id:"orchestration",level:3},{value:"Resource Management",id:"resource-management",level:3}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"practical-considerations"},"Practical Considerations"),(0,a.kt)("p",null,"Design considerations can be very circumstance dependent. These practical\nconsiderations are more universal goals which this guide will aim for. We will\nstart with hardware, move to networking, and then approach software. This is not\na technical requirements list, it is a high level overview of what we will need.\nIf you want to see the specific technical requirements, start with\n",(0,a.kt)("a",{parentName:"p",href:"/docs/l1-hosts/hardware"},"Hardware Requirements"),"."),(0,a.kt)("h2",{id:"hardware"},"Hardware"),(0,a.kt)("p",null,"Hardware is expensive, and the node expense will balloon unless managed\nappropriately. You probably are already running a single computer node. As a\nfirst measure, we will re-purpose and expand on top of it, count it as one of\nyour hosts."),(0,a.kt)("h3",{id:"multi-compute"},"Multi-Compute"),(0,a.kt)("p",null,"The node needs to be composed of multiple computers, which is the single most\nimportant step for removing single points of failure. A composable node can grow\nand shrink accordingly. An example priority resource list to meet multi-compute\nmight be:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Raspberry Pis, bare-metal, ARM"),(0,a.kt)("li",{parentName:"ul"},"NUCs, bare-metal, AMD"),(0,a.kt)("li",{parentName:"ul"},"Random old computer, bare-metal, most like AMD"),(0,a.kt)("li",{parentName:"ul"},"VPS, cloud, AMD (usually)")),(0,a.kt)("p",null,'Each computer (also referred to as "host" in this guide) should have adequate\nresources to run a full node itself, if disconnected from the cluster. To this\nend VPS will probably be the most expensive long term and will not be considered\nfor this guide at the moment.'),(0,a.kt)("h3",{id:"storage"},"Storage"),(0,a.kt)("p",null,'Bitcoin consumes low compute resources (outside syncing), but high storage\nresources and network resources. We will soon see why in software, but we should\nassume HDD (aka "spinning rust") should not be used for mission critical storage\n(like the blockchain). All said storage should be SSD. What is more, SSD should\nbe minimally 2 TB, as the blockchain is now >500 GB (depending on set flags) and\nLonghorn (see below) inefficiently allocates space.'),(0,a.kt)("h3",{id:"power"},"Power"),(0,a.kt)("p",null,"We will assume utility power is used and also that it is unreliable."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"One (or many) Uninterruptible Power Supply(s) (UPS) should be integrated into\nthe node/router as a minimum backstop for power inconsistencies."),(0,a.kt)("li",{parentName:"ul"},"Solar or other power sources should be pursued, but will not, at this time,\nfactor into this guide.")),(0,a.kt)("h3",{id:"networking"},"Networking"),(0,a.kt)("p",null,"With a multi-node cluster we will need a network (each node must connect to each\nother), and a gateway (each node must have internet access)."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://www.pfsense.org/"},"pfSense"))," is an industry-leading FOSS firewall and\nrouter. We will be able to use it to secure and design our network and provide\nall kinds of additional services to our node. Some features include:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The ability to put our node behind a different IP address than our ISP\nassigned IP address via a VPN."),(0,a.kt)("li",{parentName:"ul"},"The ability to add remote nodes, or virtual private servers (VPS), to our\ncluster."),(0,a.kt)("li",{parentName:"ul"},"The ability to silo our node from our local network."),(0,a.kt)("li",{parentName:"ul"},"The ability to provide remote and private access to our node."),(0,a.kt)("li",{parentName:"ul"},"The ability to provide multiple internet access points, via cellular hot-spot\nor satellite."),(0,a.kt)("li",{parentName:"ul"},"The ability to diversify the node into multiple physical locations")),(0,a.kt)("h2",{id:"software"},"Software"),(0,a.kt)("p",null,"It should go without saying, but all software must be Free and Open Source\nSoftware (FOSS)."),(0,a.kt)("h3",{id:"orchestration"},"Orchestration"),(0,a.kt)("p",null,'With a multiple computer bitcoin cluster, orchestration software will be\nrequired to get them to talk effectively and "share" or "optimize" resources.\n',(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://kubernetes.io/"},"Kubernetes"))," (k8s) is the industry-leading FOSS tool\nto orchestrate all kinds of multi-computer architecture, and we should start by\nusing it and designing around it."),(0,a.kt)("p",null,"We will use the ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://k3s.io/"},"k3s"))," distribution for its light wight,\nedge-computer focus and robust community support (it works great on Raspberry\nPis, for instance)"),(0,a.kt)("h3",{id:"resource-management"},"Resource Management"),(0,a.kt)("p",null,"Bitcoin consumes high storage resources. As such, we will consider a custom\nstorage solution for managing blockchain data in the cluster.\n",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://longhorn.io/"},"Longhorn"))," is a FOSS, lightweight, reliable and\neasy-to-use distributed block storage system for Kubernetes."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Features include:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Replicate the Blockchain"),(0,a.kt)("li",{parentName:"ul"},"Snapshot, backup, and restore the blockchain"),(0,a.kt)("li",{parentName:"ul"},"Move the blockchain between hosts"))),(0,a.kt)("li",{parentName:"ul"},"Drawbacks include:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Slow dev cycle means out of sync with Kubernetes master branch, combined\nwith automated updating this is the only thing that has killed the PoC node\nso far."),(0,a.kt)("li",{parentName:"ul"},"Not strictly needed"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"Requires")," SSD drives")))))}d.isMDXComponent=!0}}]);