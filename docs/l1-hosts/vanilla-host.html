<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-l1-hosts/vanilla-host">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Stand-up Vanilla Hosts | HAB Node</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gildedpleb.github.io/hab-guide/img/og_image.png"><meta data-rh="true" name="twitter:image" content="https://gildedpleb.github.io/hab-guide/img/og_image.png"><meta data-rh="true" property="og:url" content="https://gildedpleb.github.io/hab-guide/docs/l1-hosts/vanilla-host"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Stand-up Vanilla Hosts | HAB Node"><meta data-rh="true" name="description" content="We will now be standing up Vanilla Hosts."><meta data-rh="true" property="og:description" content="We will now be standing up Vanilla Hosts."><link data-rh="true" rel="icon" href="/hab-guide/img/favicon.png"><link data-rh="true" rel="canonical" href="https://gildedpleb.github.io/hab-guide/docs/l1-hosts/vanilla-host"><link data-rh="true" rel="alternate" href="https://gildedpleb.github.io/hab-guide/docs/l1-hosts/vanilla-host" hreflang="en"><link data-rh="true" rel="alternate" href="https://gildedpleb.github.io/hab-guide/docs/l1-hosts/vanilla-host" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/hab-guide/blog/rss.xml" title="HAB Node RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/hab-guide/blog/atom.xml" title="HAB Node Atom Feed"><link rel="stylesheet" href="/hab-guide/assets/css/styles.6f2a620f.css">
<link rel="preload" href="/hab-guide/assets/js/runtime~main.de016c14.js" as="script">
<link rel="preload" href="/hab-guide/assets/js/main.8db12bc9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<style data-styled="" data-styled-version="5.3.6"></style><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/hab-guide/"><div class="navbar__logo"><img src="/hab-guide/img/ionico.png" alt="HAB Node logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/hab-guide/img/ionico.png" alt="HAB Node logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/hab-guide/what">What?</a><a class="navbar__item navbar__link" href="/hab-guide/poc">PoC</a><a class="navbar__item navbar__link" href="/hab-guide/why">Why?</a><a class="navbar__item navbar__link" href="/hab-guide/how">How?</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/hab-guide/docs/Introduction/intro">BYO</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/hab-guide/blog">Blog</a><a class="navbar__item navbar__link" href="/hab-guide/support">Support</a><a href="https://github.com/gildedpleb/hab-guide" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/hab-guide/"><img src="/hab-guide/img/ionico.png" alt="HAB Node logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/hab-guide/img/ionico.png" alt="HAB Node logo" class="themedImage_ToTc themedImage--dark_i4oU"><b></b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/hab-guide/docs/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/hab-guide/docs/category/layer-1---hosts">Layer 1 - Hosts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Layer 1 - Hosts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/hardware">Hardware Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/software">Software Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/control-prep">Control Prep</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/host-naming">Host Naming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/ansible">Ansible</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/networking">Stand-up Raw Hosts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hab-guide/docs/l1-hosts/vanilla-host">Stand-up Vanilla Hosts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/vanilla-recap">Stand-up Vanilla Recap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/ansible-vault">Ansible Vault</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/live-hosts">Stand-up Live Hosts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hab-guide/docs/l1-hosts/fin">Tear-down Live Hosts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/hab-guide/docs/category/layer-2---k3s">Layer 2 - K3s</a><button aria-label="Toggle the collapsible sidebar category &#x27;Layer 2 - K3s&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/hab-guide/docs/category/layer-3---bitcoin">Layer 3 - Bitcoin</a><button aria-label="Toggle the collapsible sidebar category &#x27;Layer 3 - Bitcoin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/hab-guide/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/hab-guide/docs/category/layer-1---hosts"><span itemprop="name">Layer 1 - Hosts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Stand-up Vanilla Hosts</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Stand-up Vanilla Hosts</h1><p>We will now be standing up Vanilla Hosts.</p><p>For each host type below, you will have to do a handful of particulars before
standing up the vanilla host. However, once those are complete, you will be
running <em>the same</em> command on your control computer with different arguments.
Something like:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/standup-vanilla.yml -e </span><span class="token string" style="color:#e3116c">&quot;rawhosts=hostName&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before you set up your hosts as per their type, and before you run any commands,
let&#x27;s review the final code block we will be running. Open up
<code>Hosts/standup-vanilla.yml</code> in an editor. This time, see if you can figure out
what it&#x27;s doing without heavily commented code. We suggest DuckDuckGoing
anything you do not understand with a simple copy/past. However, if that is too
in the weeds, we have heavily commented the Ansible plays for
<code>Hosts/prep-raw-pis-for-boot-from-usb.yml</code> open that file to get a better
rundown of Ansible files.</p><p>But, to broadly explain the <code>Hosts/standup-vanilla.yml</code> code that we will run
for all hosts, the commands will do this:</p><ol><li>Add a handful of files to the <code>~/.HAB/inventory</code> directory that will assist
in planing and managing the cluster for later steps.</li><li>Fact gather about the new hosts added in the command line, and add then to
any previously added hosts.</li><li>Check for host name validity and uniqueness.</li><li>Make sure, according to OS, that the host is up-to-date, and the appropriate
settings are set for being able to receive k3s.</li><li>Also add some important quality of life improvements, like message-of-the-day
when you ssh into a host.</li><li>Assert and double check everything looks good to go.</li></ol><p>With this in mind, let&#x27;s now prep your hosts according to the type of host they
are.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Raspberry Pi</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">NUC</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Generic</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stand-up-vanilla-rpi">Stand-up Vanilla RPi<a class="hash-link" href="#stand-up-vanilla-rpi" title="Direct link to heading">‚Äã</a></h2><p>Raspberry Pi&#x27;s need no introduction. At this point in time, we should probably
assume a great deal of pleb-nodes run on Raspberry Pis and much of the following
should be familiar to all who run them.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="boot-from-ssd">Boot From SSD<a class="hash-link" href="#boot-from-ssd" title="Direct link to heading">‚Äã</a></h2><p>Running k3s in high availability mode‚Äîwhere there are three or more controlling
nodes that can individually be killed without the cluster going down‚Äîmay kill
your SD card from too many etcd writes, and besides, your SD card read/write
times are very slow in comparison to what is available. The
<a href="https://rancher.com/docs/k3s/latest/en/installation/ha-embedded/" target="_blank" rel="noopener noreferrer">docs</a> suggest
that running k3s in HA on a SD card is not a good idea. We could run the DB
externally, and have 2 master nodes, but that feels antithetical‚Äîwe&#x27;d rather
have a third node to run in HA mode than a NFS external database managing node
state‚Äîas said NFS may not be able to function as a full node itself.</p><p>In light of this, we will provision our pi&#x27;s to boot from a SSD card connected
to USB.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prep-raw-raspberry-pis">Prep Raw Raspberry Pi&#x27;s<a class="hash-link" href="#prep-raw-raspberry-pis" title="Direct link to heading">‚Äã</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Be sure all hosts and all SD/SSD media do not have any information on them that
is not backed up or can not be lost. <em>Imaging will erase this information.</em></p></div></div><p>The purpose of this first official imaging is to gather data about our pis, to
<code>ssh</code> in for the first time, and to make sure they are ready to boot from an
external SSD. Only once they are ready to boot from an external drive, will we
be able to stand up vanilla pis.</p><p>A few notes to keep in mind before embarking:</p><ul><li><p><strong>Host Count</strong>: If you only have one pi, that&#x27;s fine.</p></li><li><p><strong>SD Count</strong>: If you only have 1 SD card but multiple pis, you will have to
run through this entire thing for each pi, individually, but it&#x27;ll work.</p></li><li><p><strong>Add a Pi Later</strong>: You must also go through these steps to add a new pi,
regardless of the state of other pis (when adding a new pi, you only have to
execute all actions against the one new pi, the other pis are golden)</p></li><li><p><strong>User/Password</strong>: This guide and the Ansible scripts herein rely on a uniform
user/password schema when in the raw and vanilla state. Though you can deviate
from them, it will make your life just a little easier to stick with the same
user and password for ALL hosts in the vanilla state. We will secure the host
with far superior methods later on.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>With the first Pi imaging, it is important to stick with the given name and
password. These are explicitly tied to a script and only used one time as such
for the first imaging. Then you can change them.</p></div></div></li><li><p><strong>Booting From USB</strong>: The
<a href="https://www.raspberrypi.com/documentation/computers/raspberry-pi.html#raspberry-pi-4-boot-eeprom" target="_blank" rel="noopener noreferrer">recommended way of ensuring that booting from USB is enabled</a>
is simpler. However, this way will provide some more logging if things go
south and will update firmware if needed.</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="first-imaging">First Imaging<a class="hash-link" href="#first-imaging" title="Direct link to heading">‚Äã</a></h3><ol><li><p>If you are setting up multiple pis, none of the params in the below list
will change pi to pi, thus, setting <code>to always use</code> means you do not have to
do this for each image write when completed in parallel. Or if you only have
1 SD card, you can write one image and start at <strong>Step vii</strong> for each
additional pi in <strong>This Step</strong>. In such a case, be sure to continue to
<strong>Step 2</strong> and <strong>3</strong>, before moving on to the next pi. Repeat for each
Raspberry Pi:</p><ol><li>Insert SD card into control computer</li><li>In Raspberry Pi Imager, choose image: <code>Raspberry Pi OS Lite (64-bit)</code></li><li>Select appropriate SD card</li><li>Click the ‚öôÔ∏è Advanced Options:<ul><li>Image customization options: <code>to alwasy use</code></li><li>‚úÖ Enable SSH<ul><li>‚úÖ User password authentication</li></ul></li><li>‚úÖ Set username and password</li><li>Username: <code>pi</code></li><li>Password: <code>raspberryRaw</code></li><li>‚úÖ Set locale setting<ul><li>Time zone: <code>[your timezone]</code></li><li>Keyboard layout: <code>[your keyboard layout]</code></li><li>‚úÖ Skip first-run wizard</li><li>If you are using wifi for this (not officially recommended, but
doable), you should set that up here</li></ul></li></ul></li><li><strong>WRITE THE IMAGE</strong></li><li>Eject</li><li>Put into appropriate RPi</li><li>Attach pi to the network via Ethernet if you are using Ethernet</li><li>Power on (aka, plug into power)</li></ol></li><li><p>Once all the pis are powered on (or once each pi is individually if you only
have 1 SD card), run this command on your local computer, alter the subnet
to the subnet your pis are on, it can be CIDR, a range, or a single IP‚Äî(it
gets past to <code>nmap</code> in the play). Again, use the method we discussed in
<a href="/hab-guide/docs/l1-hosts/ansible">Ansible</a> and review the code you are about to run
before running, we have heavily commented it to help.</p><div class="language-bahs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bahs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/prep-raw-pis-for-boot-from-usb.yml -e &quot;subnet=10.1.0.20-29&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If all is well, Ansible will update the software, ensure that booting from
USB is enabled, update firmware, log pertinent info, and shut down ALL the
pis. If something fails, consult the Ansible logs and trouble shoot any
issues.</p></li><li><p>Once all the pis are shut down, remove the SD Card(s).</p></li></ol><p>You should never have to do this step again for any pi that has already done it.
But it&#x27;s idempotent, so it doesn&#x27;t matter if you do just to make sure‚Äîand thus
the power of idempotence.</p><p>You can now boot from a USB attached drive, so, let&#x27;s do that...</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="second-imaging">Second Imaging<a class="hash-link" href="#second-imaging" title="Direct link to heading">‚Äã</a></h3><ol><li>Open Raspberry Pi Imager once again on control computer:</li><li>This time, for each RPi:<ul><li>Insert <strong>SSD</strong> (not to be confused with SD Card) into the control computer.</li><li>Choose image: <code>Raspberry Pi OS Lite (64-bit)</code></li><li>Select appropriate SSD</li><li>Click the ‚öôÔ∏è Advanced Options. If you are setting up multiple pis, the only
param of the bellow settings that will change pi to pi is the hostname<ul><li>Image customization options: <code>to always use</code></li><li>‚úÖ Set the hostname. Use the hostname that is already defined in DHCP/DNS
for the device the SSD belongs to: e.g. <code>pi1</code>.</li><li>‚úÖ Enable SSH<ul><li>‚úÖ User password authentication</li></ul></li><li>‚úÖ Set username and password (This password can be altered, but its just
easier keep it as is. If you alter them, they must stay uniform across
hosts)<ul><li>Username: <code>hab</code></li><li>Password: <code>vanillaHab</code></li></ul></li><li>‚úÖ Set locale setting<ul><li>Time zone: <code>[your timezone]</code></li><li>Keyboard layout: <code>[your keyboard layout]</code></li><li>‚úÖ Skip first-run wizard</li></ul></li></ul></li><li><strong>WRITE THE IMAGE</strong></li></ul></li><li>Eject</li><li>Put SSD into appropriate RPi</li><li>Power on</li></ol><p>If you didn&#x27;t change the user/password, on the control machine, edit the host
names below and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/standup-vanilla.yml -e </span><span class="token string" style="color:#e3116c">&quot;rawhosts=pi1,pi2,pi3,pi4,pi5&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you did change the user and password, edit the host names, user, and password
below and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/standup-vanilla.yml -e </span><span class="token string" style="color:#e3116c">&quot;rawhosts=pi1,pi2,pi3,pi4,pi5 user=pi pass=raspberryRaw&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If there are no failures, all raw pi&#x27;s are now vanilla hosts üôå</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stand-up-vanilla-nucs">Stand-up Vanilla NUCs<a class="hash-link" href="#stand-up-vanilla-nucs" title="Direct link to heading">‚Äã</a></h2><p>NUCs are extremely performant, low form-factor, extensible consumer grade
devices but can be more expensive than pis.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prep-raw-nucs">Prep Raw NUCs<a class="hash-link" href="#prep-raw-nucs" title="Direct link to heading">‚Äã</a></h2><ul><li><strong>User/Password</strong>: This guide and the Ansible scripts herein rely on a uniform
user/password schema when in the raw and vanilla state. Though you can deviate
from them, it will make your life just a little easier to stick with the same
user and password for ALL hosts in the vanilla state. We will secure the host
with far superior methods later on.</li></ul><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Be sure all hosts and all SD/SSD media do not have any information on them that
is not backed up or can not be lost. <em>Imaging will erase this information.</em></p></div></div><ol><li>Install all the hardware on the NUC: M.2 drive, SATA, RAM, etc.</li><li>Connect monitor and keyboard to NUC.</li><li>Connect Ethernet cable.</li><li>Connect power, but no need to power on yet.</li><li>Get the latest Ubuntu server image from
<a href="https://ubuntu.com/download/server" target="_blank" rel="noopener noreferrer">Ubuntu</a> on your controlling computer</li><li>On the Ubuntu website, select &quot;Option 2 - Manual Server Installation&quot;</li><li>Make sure you are downloading <strong>AMD</strong> architecture (you usually are, and it
will say so in the name of the download, e.g.
&quot;ubuntu-20.04.4-live-server-amd64.iso&quot;)</li><li>Click download</li><li>Open the Raspberry Pi Imager</li><li>Choose &quot;Use Custom&quot; and find the image you just downloaded</li><li>Insert a SD card into the control computer</li><li>Select it in Imager as the &quot;storage&quot; option</li><li>(it may ask you if you would like to preserver setting from the previous
imaging, click &quot;Use Defaults&quot; or &quot;Reset&quot;)</li><li><strong>Click WRITE</strong></li><li>Once written, Eject card and put it in the NUC</li><li>Power on the NUC and hold / press F10 on the keyboard until you see the
<code>boot from</code> screen.</li><li>Select boot from USB / SD.</li><li>Go through the process of setting up the server.<ul><li>Almost all the setting defaults should suffice</li><li>No need to enter your name</li><li>User and password (This password can be altered, but again it&#x27;s just easier
to keep it as is):<ul><li>User: <code>hab</code></li><li>Password: <code>vanillaHab</code></li></ul></li><li>SSH:<ul><li>Make sure it is installed</li><li>No need to copy over keys just yet</li><li>Make sure password authentication is enabled</li></ul></li><li>Select disk partitions and boot drives as you find appropriate, generally,
we want at least one massive partition &gt; 1.5 TB. (If this step confuses
you, just select defaults, it can be fixed later).</li></ul></li><li>Once everything is installed, it will indicate a successful install, and ask
you to eject the USB / SD media, and hit <code>enter</code>, Eject it, hit enter.</li><li>It will now Boot the device from disk</li><li>Log in using provided user/pass</li><li>Do not disconnect keyboard / monitor until you can confirm that you can ssh
in from local control machine using user/pass given above<ul><li>If you can not log in, you may need to start <code>sshd</code> on the NUC, run:
<code>sudo systemctl enable sshd</code> (this is a problem we had) but there could be
a
<a href="https://duckduckgo.com/?q=can+not+SSH+into+Ubuntu+Server+on+NUC&amp;t=ffab&amp;ia=web" target="_blank" rel="noopener noreferrer">handful</a>
of other things going on.)</li></ul></li><li>Once you have SSHed in, escalate the <code>hab</code> user permissions to use sudo
without a password<ol><li>Run:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> visudo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Add this to the end of the file:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hab </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> NOPASSWD:ALL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>To save changes: <code>CTRL + o</code></li><li>Confirm changes: <code>ENTER</code></li><li>Exit and apply : <code>CTRL + x</code></li></ol></li><li>Set the host name<ol><li>A hostname will never change from top to bottom in this guide for each
computer. Use the hostname that is already defined for this device: e.g.
<code>nuc1</code></li><li>While still logged in, run this command, be sure to change the name to
match the NUC its being applied to, e.g. <code>nuc1</code> etc:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> hostnamectl set-hostname nuc1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li><li>It might also be good to make sure firmware is up-to-date with:
<code>fwupdmgr get-updates --ipfs</code> (though, we have only had limited success
here).</li><li>Additionally, it&#x27;s probably a good idea to make sure your hard drive, volume
groups, and logical volumes are in order. Run, <code>sudo pvs</code> <code>sudo vgs</code> and
<code>sudo lvs</code>. Your physical volumes (&#x27;pv&#x27;, from &#x27;pvs&#x27;) should reflect the
expected disk space you have. So too should vgs (volume groups) and lvs
(logic volumes). See
<a href="https://askubuntu.com/questions/1106795/ubuntu-server-18-04-lvm-out-of-space-with-improper-default-partitioning" target="_blank" rel="noopener noreferrer">here</a>
for more details, but you might need to simply run <code>lvm</code> <code>lvextend</code> and
<code>resize2fs</code>:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hab@nuc2: sudo su -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[sudo] password for hab:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@nuc2:~# lvm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lvm&gt; lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Size of logical volume ubuntu-vg/ubuntu-lv changed from 100.00 GiB (25600 extents) to &lt;1.82 TiB (476150 extents).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Logical volume ubuntu-vg/ubuntu-lv successfully resized.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lvm&gt; exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Exiting.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@nuc2:~# resize2fs /dev/ubuntu-vg/ubuntu-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resize2fs 1.46.5 (30-Dec-2021)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">old_desc_blocks = 13, new_desc_blocks = 233</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The filesystem on /dev/ubuntu-vg/ubuntu-lv is now 487577600 (4k) blocks long.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stand-up-vanilla-nucs-1">Stand-up Vanilla NUCs<a class="hash-link" href="#stand-up-vanilla-nucs-1" title="Direct link to heading">‚Äã</a></h2><p>Once all the NUCs are raw, as per these steps, run this command on your local
computer:</p><p>If you didn&#x27;t change the user/password, edit the host names below and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/standup-vanilla.yml -e </span><span class="token string" style="color:#e3116c">&quot;rawhosts=nuc1,nuc2 nameservers=10.1.0.1,1.1.1.1 timezone=EST&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you did change the user and password, edit the hostnames, user, and password
below and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/standup-vanilla.yml -e </span><span class="token string" style="color:#e3116c">&quot;rawhosts=nuc1,nuc2 user=newUser pass=newPassword nameservers=10.1.0.1,1.1.1.1 timezone=EST&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Passing in a <code>nameserver</code> is optional, if you do not pass one in, <code>1.1.1.1</code> will
be used. Likewise with <code>timezone</code>, default is <code>US/Pacific</code></p><p>If there are no failures, all raw NUC&#x27;s are now vanilla hosts üôå</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stand-up-vanilla-generic-device">Stand-up Vanilla Generic Device<a class="hash-link" href="#stand-up-vanilla-generic-device" title="Direct link to heading">‚Äã</a></h2><p>Given the setup for Raspberry Pis and NUCs, we should now have some guidelines
on setting up a <em>generic</em> device. Be sure to read the NUC setup steps in
particular.</p><p>Of first importance is to make sure the device meets <em>hardware</em> requirements
outlined <a href="/hab-guide/docs/l1-hosts/hardware">elsewhere</a>. With that set, the easiest way
forward is to start with Ubuntu server, as it will be generally the most
well-supported among a variety of hardware. What is more, with Ubuntu, getting
it into a raw state shouldn&#x27;t be dissimilar from setting up a NUC as we have
just seen.</p><p>Here are some basic goalposts for adding a generic host that we should call
attention to from the NUC guide.</p><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Name the host uniquely in accordance with your naming plan.</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Get ssh access from your control machine via password</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Make sure <code>hostnamectl</code> is set correctly.</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Make sure Ansible does not need to enter the password to use root
privileges by adding <code>hab ALL=(ALL) NOPASSWD:ALL</code></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Make sure the disk partition is as big as it can be</li></ul><p>All of these have pathways in the NUC guide above, in fact, again, most of the
NUC guide should apply.</p><p>You can then stand up a vanilla generic raw host using the same command we have
already seen:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apb Hosts/standup-vanilla.yml -e </span><span class="token string" style="color:#e3116c">&quot;rawhosts=geriatric1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If there are no failures, all raw generic hosts are now vanilla hosts üôå</p></div></div></div><p>If you don&#x27;t have any other computers, you can proceed to the section below.
Otherwise, change the tab above to the next set of hosts.</p><hr><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>All the steps above will soon be irrelevant when
<a href="https://openfaas.gumroad.com/l/netbooting-raspberrypi" target="_blank" rel="noopener noreferrer">netbooting</a>‚Äîbooting,
imaging, and provisioning a Raspberry Pi (or any computer) remotely‚Äîmakes it
into the guide!</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/GildedPleb/hab-guide/edit/master/docs/l1-hosts/vanilla-host.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-06T18:24:34.000Z">Feb 6, 2023</time></b> by <b>GildedPleb</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/hab-guide/docs/l1-hosts/networking"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Stand-up Raw Hosts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/hab-guide/docs/l1-hosts/vanilla-recap"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Stand-up Vanilla Recap</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#stand-up-vanilla-rpi" class="table-of-contents__link toc-highlight">Stand-up Vanilla RPi</a></li><li><a href="#boot-from-ssd" class="table-of-contents__link toc-highlight">Boot From SSD</a></li><li><a href="#prep-raw-raspberry-pis" class="table-of-contents__link toc-highlight">Prep Raw Raspberry Pi&#39;s</a><ul><li><a href="#first-imaging" class="table-of-contents__link toc-highlight">First Imaging</a></li><li><a href="#second-imaging" class="table-of-contents__link toc-highlight">Second Imaging</a></li></ul></li><li><a href="#stand-up-vanilla-nucs" class="table-of-contents__link toc-highlight">Stand-up Vanilla NUCs</a></li><li><a href="#prep-raw-nucs" class="table-of-contents__link toc-highlight">Prep Raw NUCs</a></li><li><a href="#stand-up-vanilla-nucs-1" class="table-of-contents__link toc-highlight">Stand-up Vanilla NUCs</a></li><li><a href="#stand-up-vanilla-generic-device" class="table-of-contents__link toc-highlight">Stand-up Vanilla Generic Device</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Techical Designs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/GildedPleb/hab-guide" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/GildedPleb/hab-plays" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ansible Plays<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/GildedPleb/helm-charts/blob/master/charts/hab" target="_blank" rel="noopener noreferrer" class="footer__link-item">Helm Chart<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/gildedpleb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/GildedPleb" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Essential Qs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/hab-guide/docs/Introduction/who">Who?</a></li><li class="footer__item"><a class="footer__link-item" href="/hab-guide/what">What?</a></li><li class="footer__item"><a class="footer__link-item" href="/hab-guide/why">Why?</a></li><li class="footer__item"><a class="footer__link-item" href="/hab-guide/how">How?</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/hab-guide/poc">Proof of Concept</a></li><li class="footer__item"><a class="footer__link-item" href="/hab-guide/support">Support</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/hab-guide/img/ionico.png" alt="HAB Node" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/hab-guide/img/ionico.png" alt="HAB Node" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright ¬© 2023 HAB Node Project.</div></div></div></footer></div>
<script src="/hab-guide/assets/js/runtime~main.de016c14.js"></script>
<script src="/hab-guide/assets/js/main.8db12bc9.js"></script>
</body>
</html>